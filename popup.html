<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cookie Switch</title>
  <link rel="stylesheet" href="popup.css" />
</head>
<body>
  <div class="app">
    <header>
      <span class="app-version"></span>
      <div class="header-actions">
        <button id="settingsBtn" class="icon-button settings" data-tooltip="Settings">⚙</button>
        <button id="helpBtn" class="icon-button" data-tooltip="Open help">?</button>
      </div>
      <h1>Cookie Switch</h1>
      <p>Save cookie sets for any site and swap accounts instantly.</p>
    </header>

    <section class="card" id="siteManager">
      <div class="section-header">
        <h2>Website</h2>
        <div class="status" id="siteStatus"></div>
      </div>
      <label class="field">
        <span>Saved sites</span>
        <div class="site-select">
          <select id="siteSelect"></select>
          <button id="newSiteBtn" class="ghost" title="Create a new site profile">New</button>
        </div>
      </label>
      <label class="field">
        <span>Site URL</span>
        <input type="text" id="siteInput" placeholder="https://example.com" />
      </label>
      <label class="field">
        <span>Notes (optional)</span>
        <textarea id="siteNotesInput" rows="2" placeholder="Extra info, deep link, etc."></textarea>
      </label>
      <div class="actions site-actions">
        <button id="saveSiteBtn">Save Site</button>
        <button id="deleteSiteBtn" class="danger ghost">Delete Site</button>
        <button id="importSiteBtn" class="ghost">Import</button>
        <button id="exportSiteBtn" class="ghost">Export</button>
      </div>
    </section>

    <section class="card" id="accountsPanel">
      <div class="section-header">
        <h2>Accounts</h2>
        <div class="status" id="accountStatus"></div>
      </div>
      <div id="accountsList" class="account-list"></div>
    </section>

    <section class="card" id="accountEditor">
      <div class="section-header">
        <h2 id="accountFormTitle">Add Account</h2>
      </div>
      <label class="field">
        <span>Account name</span>
        <input type="text" id="accountName" placeholder="e.g. Marketing Team" />
      </label>
      <label class="field checkbox-field">
        <span>Auto update</span>
        <div class="checkbox-inline">
          <input type="checkbox" id="autoSyncToggle" />
          <label for="autoSyncToggle">Refresh this account when site cookies change</label>
        </div>
      </label>
      <div class="cookie-table-header">
        <span>Cookies</span>
        <div class="cookie-actions">
          <button id="importCookiesBtn" class="ghost" title="Capture cookies from the active tab">Get Current Account</button>
        </div>
      </div>
      <div class="table-wrapper">
        <table id="cookiesTable">
          <thead>
            <tr>
              <th>Name</th>
              <th>Value</th>
              <th>Domain</th>
              <th>Path</th>
              <th>Secure</th>
              <th>HTTP Only</th>
              <th></th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
      <div class="actions wrap start">
        <button id="importAccountBtn" class="ghost">Import Account</button>
        <button id="resetAccountForm" class="ghost">Reset</button>
        <button id="saveAccountBtn">Save Account</button>
      </div>
    </section>

    <footer class="app-footer">
      <span>Created by Abid Khan</span>
      <span>© 2025 All rights reserved</span>
    </footer>
  </div>

  <div id="helpModal" class="modal hidden">
    <div class="modal-content">
      <button id="closeHelpBtn" class="icon-button close" title="Close">×</button>
      <h3>Help &amp; Documentation</h3>
      <div id="helpContent" class="help-content">Loading…</div>
    </div>
  </div>

  <div id="settingsModal" class="modal hidden">
    <div class="modal-content">
      <button id="closeSettingsBtn" class="icon-button close" title="Close">×</button>
      <h3>Settings</h3>
      <div class="help-content">
        <h4>Auto Update</h4>
        <div class="field toggle-field">
          <span>Auto check for updates</span>
          <input type="checkbox" id="autoUpdateToggle" />
        </div>
        <div class="actions wrap start">
          <button id="checkUpdatesBtn">Check for updates</button>
          <a id="downloadLatestLink" class="ghost hidden" href="https://github.com/abidkhanpk/cookie_switch/archive/refs/heads/master.zip" target="_blank" rel="noreferrer">Download latest ZIP</a>
        </div>
        <p id="updateStatus" class="status"></p>
        <p id="updateInstructions" class="status hidden">
          Download the ZIP, unzip it, and use <strong>chrome://extensions</strong> → Reload to apply the update.
        </p>
        <hr />
        <h4>All Sites Backup</h4>
        <div class="actions wrap start">
          <button id="importBackupBtn" class="ghost danger">Restore All Sites</button>
          <button id="exportBackupBtn">Backup All Sites</button>
        </div>
        <p id="backupStatus" class="status"></p>
      </div>
    </div>
  </div>
  <script src="popup.js"></script>
</body>
</html>
